alias ..="cd .."
alias ...="cd ../.."

alias h='cd ~'
alias c='clear'
alias artisan='php artisan'

alias phpspec='vendor/bin/phpspec'
alias phpunit='vendor/bin/phpunit'
alias serve=serve-laravel

function serve-laravel() {
	if [[ "$1" && "$2" ]]
	then
		sudo dos2unix /vagrant/scripts/serve-laravel.sh
		sudo bash /vagrant/scripts/serve-laravel.sh "$1" "$2" 80
	else
		echo "Error: missing required parameters."
		echo "Usage: "
		echo "  serve domain path"
	fi
}

function serve-hhvm() {
	if [[ "$1" && "$2" ]]
	then
		sudo dos2unix /vagrant/scripts/serve-hhvm.sh
		sudo bash /vagrant/scripts/serve-hhvm.sh "$1" "$2" 80
	else
		echo "Error: missing required parameters."
		echo "Usage: "
		echo "  serve-hhvm domain path"
	fi
}

function serve-proxy() {
	if [[ "$1" && "$2" ]]
	then
		sudo dos2unix /vagrant/scripts/serve-proxy.sh
		sudo bash /vagrant/scripts/serve-proxy.sh "$1" "$2" 80
	else
		echo "Error: missing required parameters."
		echo "Usage: "
		echo "  serve-proxy domain port"
	fi
}

function serve-apache() {
	if [[ "$1" && "$2" ]]
	then
		sudo dos2unix /vagrant/scripts/serve-apache.sh
		sudo bash /vagrant/scripts/serve-apache.sh "$1" "$2" 80
	else
		echo "Error: missing required parameters."
		echo "Usage: "
		echo "  serve-apache domain path"
	fi
}

function artisan() {
	php artisan "$@"
}


# Custom Aliases
alias openmysql="mysql -u homestead -psecret"
alias lint="git status -sb | awk '/s/{print $2}' | sed 1d | xargs -n1 php -l"
alias db-reset="php artisan migrate:reset && php artisan migrate --seed"
alias test="clear && phpunit"

function convertarrays() {
	curl "https://raw.githubusercontent.com/thomasbachem/php-short-array-syntax-converter/master/convert.php" -o convert.php
	find . -name "*.php" ! -path "*vendor*" -exec php "convert.php" -w "{}" ;
	rm convert.php
}

# Create models, controllers, facotire,s seed, poliucy, resources, requests all in one go
# usage: acr Account User
function acr() {
        art make:model Models\\$1\\$2
        art make:controller --resource --api --model=Models\\$1\\$2 $1\\$(plur $2)Controller
        art make:factory --model=Models\\$1\\$2 $(plur $2)Factory
        art make:seed $(plur $2)Seeder
        art make:policy --model=Models\\$1\\$2 $1\\$2Policy
        art make:resource $1\\$2Resource
        art make:resource --collection $1\\$(plur $2)Collection
        art make:request $1\\Create$2Request
        art make:request $1\\Update$2Request
}
